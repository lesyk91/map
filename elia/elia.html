<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>|Квест для Елі!| Погнали!!! |</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 10px; background-image: url("/map/elia/fonfor.jpg") }
        .stage { display: none; border: 2px solid #e05858; padding: 10px; margin: 10px 0; border-radius: 10px;}
        .active { display: block; }
        .hidden { display: none; }
        input { width: 97%; padding: 8px; font-size: 16px; margin-bottom: 15px;}
        button { width: 97%; padding: 15px; font-size: 16px; cursor: pointer; margin-top: 5px; background-color: #ef7b95;border-radius: 10px;color: black; }
        img { max-width: 97%; height: auto; display: block; margin: 10px 0; }
        .message { padding: 5px; margin-top: 5px; text-align: center; font-weight: bold; }
        .correct { color: green; padding: 10px;}
        .incorrect { color: red; }
        .txt { text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5); text-align: center;}
        p {margin: 1px;}
        audio {width: 97%;}
    </style>
</head>
<body>
    <h2 class="txt">Квест для Елі!!! Погнали!)</h2>

    <!-- Етап 1 -->
     <div id="stage1" class="stage active">
        <h2>Етап 1 - Початок <button onclick="toggleStage(1)">Сховати/Показати</button></h2>
        <div id="content1">
            <label>Завдання 1: <input type="text" id="task1_1"></label>
            <label>Завдання 2: <input type="text" id="task1_2"></label>
            <label>Завдання 3: <input type="text" id="task1_3"></label>
            <label>Завдання 4: <input type="text" id="task1_4"></label>
            <button onclick="checkAnswers(1)">Перевірка</button>
            <div id="message1" class="message"></div>
            <div id="bonus1" class="hidden">
                <div id="riddle1"></div>
                <label>Завдання 5: <input type="text" id="bonusTask1"></label>
                <button onclick="checkBonus(1)">Перевірка</button>
                <div id="bonusMessage1" class="message"></div>
            </div>
        </div>
    </div>

    <!-- Етап 2 -->
    <div id="stage2" class="stage">
        <h2>Етап 2 <button onclick="toggleStage(2)">Сховати/Показати</button></h2>
        <div id="content2">
            <label>Завдання 1: <input type="text" id="task2_1"></label>
            <label>Завдання 2: <input type="text" id="task2_2"></label>
            <label><img id="image2" src="/map/elia/elia2.jpg" alt="Завдання 3">Завдання 3: <input type="text" id="task2_3"></label>
            <label>Завдання 4: <input type="text" id="task2_4"></label>
            <button onclick="checkAnswers(2)">Перевірка</button>
            <div id="message2" class="message"></div>
            <div id="bonus2" class="hidden">
                <div id="riddle2"></div>
                <img id="image2" src="/map/elia/e2.jpg" alt="Завдання 5">
                <label>Завдання 5: <input type="text" id="bonusTask2"></label>
                <button onclick="checkBonus(2)">Перевірка</button>
                <div id="bonusMessage2" class="message"></div>
            </div>
        </div>
    </div>

    <!-- Етап 3 -->
    <div id="stage3" class="stage">
        <h2>Етап 3<button onclick="toggleStage(3)">Сховати/Показати</button></h2>
        <div id="content3">
            <label>Завдання 1: <input type="text" id="task3_1"></label>
            <label>Завдання 2: <input type="text" id="task3_2"></label>
            <label>Завдання 3: <input type="text" id="task3_3"></label>
            <label>Завдання 4: <input type="text" id="task3_4"></label>
            <button onclick="checkAnswers(3)">Перевірка</button>
            <div id="message3" class="message"></div>
            <div id="bonus3" class="hidden">
                <div id="riddle3"></div>
                <img id="image3" src="https://your-link.com/image3.jpg" alt="Завдання 5">
                <label>Завдання 5: <input type="text" id="bonusTask3"></label>
                <button onclick="checkBonus(3)">Перевірка</button>
                <div id="bonusMessage3" class="message"></div>
            </div>
        </div>
    </div>

    <!-- Етап 4 -->
    <div id="stage4" class="stage">
        <h2>Етап 4<button onclick="toggleStage(4)">Сховати/Показати</button></h2>
        <div id="content4">
            <label><img id="image4" src="/map/elia/elia41.jpg" alt="Завдання 1">Завдання 1: <input type="text" id="task4_1"></label>
            <label>Завдання 2: <input type="text" id="task4_2"></label>
            <label><img id="image4" src="/map/elia/elia43.jpg" alt="Завдання 3">Завдання 3: <input type="text" id="task4_3"></label>
            <label>Завдання 4: <input type="text" id="task4_4"></label>
            <button onclick="checkAnswers(4)">Перевірка</button>
            <div id="message4" class="message"></div>
            <div id="bonus4" class="hidden">
                <div id="riddle4"></div>
                <label>Завдання 5: <input type="text" id="bonusTask4"></label>
                <button onclick="checkBonus(4)">Перевірка</button>
                <div id="bonusMessage4" class="message"></div>
            </div>
        </div>
    </div>

    <!-- Етап 5 -->
    <div id="stage5" class="stage">
        <h2>Етап 5<button onclick="toggleStage(5)">Сховати/Показати</button></h2>
        <div id="content5">
            <label>Завдання 1: <input type="text" id="task5_1"></label>
            <label>Завдання 2: <input type="text" id="task5_2"></label>
            <label>Завдання 3: <input type="text" id="task5_3"></label>
            <label><img id="image5" src="/map/elia/elia5.jpg" alt="Завдання 4">Завдання 4: <input type="text" id="task5_4"></label>
            <button onclick="checkAnswers(5)">Перевірка</button>
            <div id="message5" class="message"></div>
            <div id="bonus5" class="hidden">
                <div id="riddle5"></div>
                <label>Завдання 5: <input type="text" id="bonusTask5"></label>
                <button onclick="checkBonus(5)">Перевірка</button>
                <div id="bonusMessage5" class="message"></div>
            </div>
        </div>
    </div>

    <!-- Етап 6 -->
    <div id="stage6" class="stage">
        <h2>Етап 6 - УРА ФІНАЛ!!! <button onclick="toggleStage(6)">Сховати/Показати</button></h2>
        <div id="content6">
            <label>Завдання 1: <input type="text" id="task6_1"></label>
            <label>Завдання 2: <input type="text" id="task6_2"></label>
            <label>Завдання 3: <input type="text" id="task6_3"></label>
            <label>Завдання 4: <input type="text" id="task6_4"></label>
            <button onclick="checkAnswers(6)">Перевірка</button>
            <div id="message6" class="message"></div>
            <div id="bonus6" class="hidden">
                <div id="riddle6"></div>
                <label>Завдання 5: <input type="text" id="bonusTask6"></label>
                <button onclick="checkBonus(6)">Перевірка</button>
                <div id="bonusMessage6" class="message"></div>
            </div>
        </div>
    </div>
	
    <div id="stage7" class="stage">
        <h2>УРА ФІНАЛ!!! <button onclick="toggleStage(7)">Сховати/Показати</button></h2>
    </div>

    <script>
        let stageTitles = [
            "Зал Легенд", "Печера Скарбів", "Лабораторія Шефа", "Джерело Життя", "Прихисток", "УРА ФІНАЛ!!!"
        ];
        
        let riddles = [
            { text: "Відгадай де в хаті шукати - по смайликам або Підказка: Звідси шляхи розходяться всюди, Тут не перший крок роблять люди.      -    Напиши, яка це частина хати", image: "/map/elia/elia1.jpg"   },
            { text: "Загадка або смайлик для 2 Етапу" },
            { image: "/map/elia/riddle3.jpg" },
            { text: "", image: "" },
            { text: "Загадка або смайлик для 5 Етапу", image: "/map/elia/riddle5.jpg" },
            { text: "Загадка або смайлик для 6 Етапу" }
        ];
        
        // Оновлений масив finalHints з підтримкою тексту, картинок або їх комбінації
        let finalHints = [
            { text: "На основі відгаданих відповідей знайди де шукати знахідку" }, // Текст + картинка
            { text: "Шукай в Лабораторія Шефа" }, // Тільки текст
            { image: "/map/elia/hint3.jpg" }, // Тільки картинка
            { text: "", image: "" }, // Пустий елемент
            { text: "Шукай в Будинку", image: "/map/elia/hint5.jpg" }, // Текст + картинка
            { text: "Шукай в Десь там" } // Тільки текст
        ];

        let correctAnswers = [
            ["шлях", "задня сторона", "година", "холодильник"],
            ["заєць", "молекулярна дисципліна", "14", "8+2-6"],
            ["фахверк", "конструктивізм", "контрфорсовий", "5"],
            ["сходи", "сорбе", "олівець", "42"],
            ["спазмо", "ліганд", "загадка", "ранок"],
            ["741", "2 тимофія 4:7", "квитанція", "гематогенетичний"]
        ];

        let finalAnswers = ["дорога мандрівника", "фінал2", "фінал3", "фінал4", "фінал5", "фінал6"];

        function checkAnswers(stage) {
            let valid = true;
            let messageDiv = document.getElementById(`message${stage}`);
            messageDiv.innerHTML = "";
            for (let i = 1; i <= 4; i++) {
                let answer = document.getElementById(`task${stage}_${i}`).value.trim().toLowerCase();
                if (answer !== correctAnswers[stage - 1][i - 1]) {
                    messageDiv.innerHTML += `<p class='incorrect'>Невірна відповідь у завданні ${i}</p>`;
                    valid = false;
                }
            }
            if (valid) {
                messageDiv.innerHTML = `<p class='correct'>Молодець! Всі відповіді правильні!</p>`;
                document.getElementById(`bonus${stage}`).classList.remove("hidden");
                document.getElementById(`riddle${stage}`).innerHTML = `
                    ${riddles[stage - 1].text && riddles[stage - 1].text !== "" ? `<p>${riddles[stage - 1].text}</p>` : ""}
                    ${riddles[stage - 1].image && riddles[stage - 1].image !== "" ? `<img src="${riddles[stage - 1].image}" alt="Загадка ${stage}">` : ""}
                `;
            }
        }
        
        function checkBonus(stage) {
            let answer = document.getElementById(`bonusTask${stage}`).value.trim().toLowerCase();
            let messageDiv = document.getElementById(`bonusMessage${stage}`);
            if (answer === finalAnswers[stage - 1]) {
                // Оновлена логіка відображення підказок
                messageDiv.innerHTML = `
                    ${finalHints[stage - 1].text && finalHints[stage - 1].text !== "" ? `<p class='correct'>${finalHints[stage - 1].text}</p>` : ""}
                    ${finalHints[stage - 1].image && finalHints[stage - 1].image !== "" ? `<img src="${finalHints[stage - 1].image}" alt="Підказка ${stage}">` : ""}
                `;
                let nextStage = document.getElementById(`stage${stage + 1}`);
                if (nextStage) {
                    nextStage.classList.add("active");
                }
            } else {
                messageDiv.innerHTML = `<p class='incorrect'>Неправильна відповідь!</p>`;
            }
        }
        
        function toggleStage(stage) {
            let content = document.getElementById(`content${stage}`);
            content.classList.toggle("hidden");
        }
    </script>
</body>
</html>
